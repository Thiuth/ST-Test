# Обзор решения

Переработанный вариант приложения для расчета зарплат. Версия третья.
Так же как и предыдущий вариант, приложение использует Windows Forms, также его интерфейс остался практически неизменным.

В текущем виде архитектура реализует шаблон проектирования MVP.
В соответствии с шаблоном, функционально логика приложения представлена отдельными слоями модели, представления и вида. Модель содержит необходимую бизнес-логику и логику прямого взаимодействия с БД. Классы-представители обеспечивают взаимодействие между моделью и UI.

Основные изменения по сравнению с предыдущей версией:
* Практически весь самописный функционал взаимодействия с БД убран. Теперь приложение, как и было рекомендовано, использует Entity Framework. Единственное, что было оставлено из старого - это создание новых файлов БД "вручную", т.к. насколько я понял, EF не умеет делать это автоматически при использовании SQLite.
* Модель переработана соответствующим образом и вынесена в отдельную библиотеку классов.
* Все лишнее из модели убрано. Теперь для вывода данных класс-представитель получает из модели List из записей, самостоятельно преобразует данные в строки и передает их в главную форму. Таким образом смешение модели с интерфейсом, вроде бы, устранено окончательно.
* В определенной степени повышена стабильность работы. Наиболее явные баги, приводившие к падениям, исправлены. Ввод некорректных данных (например букв или отрицательного значения в поле базовой з/п) в диалоговых окнах пресекается. Кроме того, теперь физически отсутствует возможность назначить сотрудника начальником для самого себя или для кого-то из вышестоящих, таким образом логических проблем возникать больше не должно.
* Алгоритм обхода дерева при расчете зарплат переработан и теперь выглядит несколько лаконичнее. Для каждого подчиненного генерируется List, содержащий ID всех вышестоящих начальников по цепочке до самого верха, а при расчете зарплаты одного сотрудника программа проходит по всем остальным и сканирует у каждого этот список.

Прочие подробности можно узнать в комментариях к коду.

Содержание каталогов:

* Presentation - классы и интерфейсы представителей
* UI - классы и интерфейсы, связанные с пользовательским интерфейсом
* FileService - классы, содержащие функционал для работы с файлами.
